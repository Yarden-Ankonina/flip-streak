# FlipStreak

A hyper-casual utility app allowing users to flip a realistic 3D coin using thumb gestures with satisfying physics and streak tracking.

## Project Structure

```
flip-streak/
├── web/              # React + Vite web application
│   ├── src/          # Source code
│   ├── public/       # Static assets
│   └── dist/         # Build output (for Capacitor)
├── mobile/           # Mobile wrapper configuration
│   ├── ios/          # iOS native project (generated by Capacitor)
│   └── android/      # Android native project (generated by Capacitor)
└── PRD.md           # Product Requirements Document
```

## Tech Stack

- **Framework**: React 19
- **Bundler**: Vite
- **3D Engine**: React Three Fiber + @react-three/drei
- **Physics**: @react-three/cannon
- **State Management**: Zustand
- **Mobile**: Capacitor.js
- **Package Manager**: pnpm

## Getting Started

### Prerequisites

- Node.js (v18+)
- pnpm (`npm install -g pnpm`)
- For iOS: Xcode and CocoaPods
- For Android: Android Studio and Android SDK

### Installation

1. Install dependencies:
```bash
cd web
pnpm install
```

### Development

Run the web app in development mode:
```bash
cd web
pnpm dev
```

### Building for Mobile

1. Build the web app:
```bash
cd web
pnpm build
```

2. Sync with Capacitor (first time):
```bash
cd web
pnpm cap:sync
```

3. Open in native IDE:
```bash
# iOS
pnpm cap:ios

# Android
pnpm cap:android
```

## Action Steps (Development Roadmap)

### Phase 1: Core Setup ✅
- [x] Initialize React + Vite project
- [x] Set up Capacitor for mobile
- [x] Install core dependencies (R3F, Zustand, etc.)

### Phase 2: 3D Coin Implementation
- [ ] Create basic coin geometry (CylinderGeometry)
- [ ] Set up PBR material system
- [ ] Load and apply textures (Albedo, Normal, Roughness, Metalness)
- [ ] Implement HDRI environment map for realistic lighting
- [ ] Create coin component with React Three Fiber

### Phase 3: Physics & Interaction
- [ ] Set up physics world with @react-three/cannon
- [ ] Implement swipe gesture detection
- [ ] Apply rotational impulse based on swipe velocity
- [ ] Add ground plane collision
- [ ] Implement heads/tails detection from final rotation

### Phase 4: Haptics & Sound
- [ ] Integrate Capacitor Haptics plugin
- [ ] Add light vibration on touch start
- [ ] Add heavy vibration on coin landing
- [ ] Implement sound effect on ground collision

### Phase 5: Streak Counter
- [ ] Create streak counter UI component
- [ ] Implement streak logic (increment/reset)
- [ ] Add visual feedback for streaks > 3
- [ ] Display current result (Heads/Tails)

### Phase 6: Polish & UX
- [ ] Add "Swipe to Flip" hint (fades after first use)
- [ ] Implement coin idle state
- [ ] Add smooth transitions and animations
- [ ] Optimize performance for mobile

### Phase 7: Future Features
- [ ] Coin skins system
- [ ] Unlockable coins based on total flips
- [ ] Global leaderboard

## Asset Requirements

For each coin skin, the artist must provide:

1. **Albedo/Color Map** - Base texture
2. **Normal Map** - Surface detail (purple map)
3. **Roughness Map** - Shiny vs matte areas
4. **Metalness Map** - Metal (white) vs non-metal (black)
5. **HDRI Environment Map** - Studio lighting (.exr or .hdr)

UV mapping must separate the coin edge from faces for proper ridge appearance.

## Development Notes

- The web app builds to `web/dist/` which Capacitor uses as the web directory
- Native projects are generated in `web/ios/` and `web/android/` after running `cap sync`
- Use `cap sync` after each build to update native projects with latest web assets

## License

ISC

