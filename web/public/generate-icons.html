<!DOCTYPE html>
<html>
<head>
    <title>Generate PWA Icons</title>
</head>
<body>
    <h1>PWA Icon Generator</h1>
    <p>This page will generate the required PWA icons. Open the browser console to see progress.</p>
    <canvas id="canvas" style="display: none;"></canvas>
    <div id="status"></div>

    <script>
        const sizes = [192, 512, 180];
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const status = document.getElementById('status');

        // Load the SVG
        const img = new Image();
        img.onload = function() {
            status.innerHTML = '<p>Generating icons...</p>';
            const downloads = [];

            sizes.forEach(size => {
                canvas.width = size;
                canvas.height = size;
                
                // Clear and draw
                ctx.clearRect(0, 0, size, size);
                ctx.drawImage(img, 0, 0, size, size);
                
                // Convert to blob and download
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    
                    if (size === 180) {
                        a.download = 'apple-touch-icon.png';
                    } else {
                        a.download = `pwa-${size}x${size}.png`;
                    }
                    
                    a.click();
                    URL.revokeObjectURL(url);
                    downloads.push(a.download);
                    
                    if (downloads.length === sizes.length) {
                        status.innerHTML = '<p style="color: green;">âœ… All icons generated! Check your downloads folder.</p>';
                        status.innerHTML += '<p>Move the downloaded files to: web/public/</p>';
                    }
                }, 'image/png');
            });
        };

        img.onerror = function() {
            status.innerHTML = '<p style="color: red;">Error loading SVG. Make sure icon.svg exists.</p>';
        };

        // Load SVG
        img.src = 'icon.svg';
    </script>
</body>
</html>

